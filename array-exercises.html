<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arrays</title>
</head>

<body>
    <script>
        console.log('---------- UPPGIFT 1 ----------');

        function arrayFromRange(min, max) {
            const output = [];
            for (let i = min; i <= max; i++)
                output.push(i);
            return output;
        }

        let numbers = arrayFromRange(1, 4);
        console.log(numbers);

        console.log('---------- UPPGIFT 2 ----------');

        numbers = [1, 2, 3, 4];

        function includes(array, searchElement) {
            for (let element of array)
                if (element === searchElement)
                    return true;
            return false;
        }

        console.log(includes(numbers, 3));

        console.log('---------- UPPGIFT 3 ----------');

        numbers = [1, 2, 3, 4, 1, 1, 1];

        function except(array, excluded) {
            const outPut = [];
            for (element of array)
                if (!excluded.includes(element))
                    outPut.push(element);
            return outPut;
        }

        let newArray = except(numbers, [1]);
        console.log(newArray);

        console.log('---------- UPPGIFT 4 ----------');

        numbers = [1, 2, 3, 4];

        function move(array, index, offset) {
            const position = (index + offset);
            if (position >= array.length || position < 0) {
                console.error('Invalid offset');
                return;
            }

            const outPut = [...array]
            const element = outPut.splice(index, 1)[0];
            outPut.splice(position, 0, element);
            return outPut;
        }

        let outPut = move(numbers, 0, 1);
        console.log(outPut);

        console.log('---------- UPPGIFT 5 ----------');

        numbers = [1, 2, 3, 4, 3];

        function countOccurrences(array, searchElement) {
            /* let sum = 0;
            for (let element of array)
                if (element === searchElement)
                    sum++;
            return sum; */

            return array.reduce((accumulator, currentValue) => {
                const occurrences = (currentValue === searchElement) ? 1 : 0;
                return accumulator + occurrences;
            }, 0);
        }

        const count = countOccurrences(numbers, 3);
        console.log(count);

        console.log('---------- UPPGIFT 6 ----------');

        numbers = [1, 2, 7, 3, 4];

        function getMax(array) {
            if (array.length === 0)
                return undefined;

            /* let maxNumber = 0;
            for (element of array)
                if (element > maxNumber)
                    maxNumber = element;
            return maxNumber;*/

            return array.reduce((a, b) => (a > b) ? a : b);
        }

        const max = getMax(numbers);
        console.log(max);

        console.log('---------- UPPGIFT 7 ----------');

        const movies = [{
            title: 'a',
            year: 2018,
            rating: 4.5
        }, {
            title: 'b',
            year: 2018,
            rating: 4.7
        }, {
            title: 'c',
            year: 2018,
            rating: 3
        }, {
            title: 'd',
            year: 2017,
            rating: 4.5
        }, ];

        const filteredMovies = movies
            .filter(m => m.year === 2018 && m.rating >= 4)
            .sort((a, b) => a.rating - b.rating)
            .reverse()
            .map(m => m.title);

        console.log(filteredMovies);
    </script>
</body>

</html>